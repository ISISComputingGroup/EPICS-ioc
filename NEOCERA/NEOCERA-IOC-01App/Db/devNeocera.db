record(mbbi, "$(P)MODE")
{
	field(DESC, "Mode")
    field(SCAN, "1 second")
    field(DTYP, "stream")
    field(INP,  "@devneocera.proto getMode() $(PORT)")
	
	field(ZRVL, 0)
	field(ZRST, "Monitor")
	field(ONVL, 1)
	field(ONST, "Control")
	field(TWVL, 2)
	field(TWST, "Auto Tune")
	field(THVL, 3)
	field(THST, "Off")
	
	info(INTEREST, "MEDIUM")
	info(archive, "VAL")
}

record(mbbo, "$(P)MODE:SP")
{
	field(DESC, "Set mode")
    field(DTYP, "stream")
    field(OUT,  "@devneocera.proto setMode() $(PORT)")
	
	field(ZRVL, 0)
	field(ZRST, "Monitor")
	field(ONVL, 1)
	field(ONST, "Control")
	
	info(archive, "VAL")
}

alias("$(P)MODE:SP", "$(P)MODE:SP:RBV")

# Temperature reading for sensor 1

record(ai, "$(P)1:SENSOR")
{
	field(DESC, "Temperature of sensor 1")
	field(SCAN, "1 second")
    field(DTYP, "stream")
    field(INP,  "@devneocera.proto getTemp(1,$(P)1:SENSOR:UNITS) $(PORT)")
	
	info(archive, "VAL")
}
record(stringin, "$(P)1:SENSOR:UNITS")
{
	field(DESC, "Temperature sensor 2 units")
	field(SCAN, "Passive")
}

# Temperature reading for sensor 2
record(ai, "$(P)2:SENSOR")
{
	field(DESC, "Temperature of sensor 2")
	field(SCAN, "1 second")
    field(DTYP, "stream")
    field(INP,  "@devneocera.proto getTemp(2,$(P)2:SENSOR:UNITS) $(PORT)")
	
	info(archive, "VAL")
}
record(stringin, "$(P)2:SENSOR:UNITS")
{
	field(DESC, "Temperature sensor 2 units")
	field(SCAN, "Passive")
}

# Temperature Setpoint 1

record(ao, "$(P)1:TEMP:SP")
{
	field(DESC, "Temperature 1 setpoint")
	field(DTYP, "stream")
	field(OUT,  "@devneocera.proto setTemp(1) $(PORT)")
}

record(ai, "$(P)1:TEMP:SP:RBV")
{
	field(DESC, "Temp 1 setpoint readback")
	field(DTYP, "stream")
	field(SCAN, "1 second")
	field(INP,  "@devneocera.proto getSpRbv(1,$(P)1:TEMP:SP:UNITS) $(PORT)")
}

record(stringin, "$(P)1:TEMP:SP:UNITS")
{
	field(DESC, "Temp 1 setpoint readback units")
	field(SCAN, "Passive")
}


# Temperature Setpoint 2

record(ao, "$(P)2:TEMP:SP")
{
	field(DESC, "Temperature 2 setpoint")
	field(DTYP, "stream")
	field(OUT,  "@devneocera.proto setTemp(2) $(PORT)")
}

record(ai, "$(P)2:TEMP:SP:RBV")
{
	field(DESC, "Temp 2 setpoint readback")
	field(DTYP, "stream")
	field(SCAN, "1 second")
	field(INP,  "@devneocera.proto getSpRbv(2,$(P)2:TEMP:SP:UNITS) $(PORT)")
}


record(stringin, "$(P)2:TEMP:SP:UNITS")
{
	field(DESC, "Temp 2 setpoint readback units")
	field(SCAN, "Passive")
}

# Get Output configuration for heater

record(mbbi, "$(P)1:TEMP:SENSOR_NO")
{
	field(DESC, "Temperature 1 sensor")
	field(DTYP, "stream")
	field(SCAN, "1 second")
	field(PINI, "YES")
	field(INP,  "@devneocera.proto getCon1($(P)1:TEMP:,CTL,HEAT) $(PORT)")

	field(ZRST, "Unknown")
	field(ONST, "Sensor 1")
	field(TWST, "Sensor 2")
	field(THST, "No sensor")

}

record(mbbi, "$(P)1:TEMP:CTL")
{
	field(DESC, "Temperature 1 control")
	
	field(ZRST, "AUTO P")
	field(ONST, "AUTO PI")
	field(TWST, "AUTO PID")
	field(THST, "PID")
	field(FRST, "TABLE")
	field(FVST, "DEFAULT")
	field(SXST, "MONITOR")
}

record(mbbi, "$(P)1:TEMP:HEAT")
{
	field(DESC, "Temperature 1 control")
	
	field(ZRST, "Off")
	field(ONST, "0.05W")
	field(TWST, "0.5W")
	field(THST, "5W")
	field(FRST, "50W")
}


# Get Output configuration for analog

record(mbbi, "$(P)2:TEMP:SENSOR_NO")
{
	field(DESC, "Temperature 2 sensor")
	field(DTYP, "stream")
	field(SCAN, "1 second")
	field(PINI, "YES")
	field(INP,  "@devneocera.proto getCon2($(P)2:TEMP:CTL) $(PORT)")

	field(ZRST, "Unknown")
	field(ONST, "Sensor 1")
	field(TWST, "Sensor 2")
	field(THST, "No sensor")

}

record(mbbi, "$(P)2:TEMP:CTL")
{
	field(DESC, "Temperature 2 control")
	
	field(ZRST, "AUTO P")
	field(ONST, "AUTO PI")
	field(TWST, "AUTO PID")
	field(THST, "PID")
	field(FRST, "TABLE")
	field(FVST, "DEFAULT")
	field(SXST, "MONITOR")
}

