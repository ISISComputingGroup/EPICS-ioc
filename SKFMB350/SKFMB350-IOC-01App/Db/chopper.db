#
# General reads
#
record(bo, "$(P)READPHASEINFO"){
	field(SCAN, "1 second")
	field(OUT, "@devSKFMB350.proto read_phase_info($(P)) $(PORT)")
	field(DTYP, "stream")
}

#
# Start / stop
#
record(bo, "$(P)START"){
	field(OUT, "@devSKFMB350.proto start $(PORT)")
	field(DTYP, "stream")
}

record(bo, "$(P)STOP"){
	field(OUT, "@devSKFMB350.proto stop $(PORT)")
	field(DTYP, "stream")
}


#
# Frequency
#

record(longin, "$(P)FREQ") {
}

record(longout, "$(P)FREQ:SP") {
	field(OUT, "@devSKFMB350.proto set_frequency $(PORT)")
	field(DTYP, "stream")
}

alias("$(P)FREQ:SP", "$(P)FREQ:SP:RBV")


#
# Phase
#

record(ai, "$(P)PHAS") {
}

record(ao, "$(P)PHAS:SP") {
	field(OUT, "@devSKFMB350.proto set_phase $(PORT)")
	field(DTYP, "stream")
}

alias("$(P)PHAS:SP", "$(P)PHAS:SP:RBV")

#
# Phase diagnostic records
#

record(ai, "$(P)PHAS:REPEATABILITY") {
}

record(ai, "$(P)PHAS:PERCENTOK") {
}

#
# Interlocks
#

record(longin, "$(P)STAT:ILK:RAW") {
    # Doesn't seem to work correctly without this intermediate record. Not sure why.
}


record(mbbiDirect, "$(P)STAT:ILK") {
	field(DTYP, "Raw Soft Channel")
	field(INP, "$(P)STAT:ILK:RAW CP MS")
	#
	# See DB file interlocks.db to get interlock PVs.
	#
}

#
# Chopper status
#

record(longin, "$(P)STAT:RAW") {
    # Doesn't seem to work correctly without this intermediate record. Not sure why.
}


record(mbbiDirect, "$(P)STAT") {
	field(DTYP, "Raw Soft Channel")
	field(INP, "$(P)STAT:RAW CP MS")
	#
	# See DB file status.db to get status PVs.
	#
}

