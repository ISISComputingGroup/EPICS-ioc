record(bo, "$(P)SIM") 
{
	field(SCAN, "Passive")
	field(DTYP, "Soft Channel")
	field(ZNAM, "NO")
	field(ONAM, "YES")
	field(VAL, "$(RECSIM=0)")
}

## Stop all motion
record (longin, "$(P)CS:MOT:STOP:ALL") 
{
	field(DESC, "Stop motions if changes and non-zero")
	field(SCAN, "Passive")
	field(DTYP, "Soft Channel")
	field(VAL, 0)
	field(MDEL, -1)
}

## Are any motors moving
## A-J set by galils, L from _MOVING1
record(calc, "$(P)CS:MOT:MOVING") 
{
	field(DESC, "IOCs with motion to complete")
	field(VAL, "0")
	field(SCAN, "Passive")
	field(CALC, "(A+B+C+D+E+F+G+H+I+J+L) > 0 ? 1 : 0")
	field(ASG, "NOTRAPW")
	info(archive, "VAL")
}

record(calcout, "$(P)CS:MOT:_MOVING1") 
{
	field(DESC, "IOCs with motion to complete")
	field(VAL, "0")
	field(SCAN, "Passive")
	field(CALC, "(A+B+C+D+E+F+G+H+I+J+K) > 0 ? 1 : 0")
	field(OUT, "$(P)CS:MOT:MOVING.L PP")
	field(OOPT, "Every Time")
	field(DOPT, "Use CALC")
	field(ASG, "NOTRAPW")
	info(archive, "VAL")
}

# used by access security file
record (bo, "$(P)CS:EXCLUSIVE") 
{
	field(DESC, "Restrict access to localhost")
	field(SCAN, "Passive")
	field(DTYP, "Soft Channel")
	field(PINI, "YES")
	field(VAL, "0")
	field(OMSL, "supervisory")
	field(ZNAM, "All access")
	field(ONAM, "Restricted access")
}

# Log file messages PV
record(waveform, "$(P)LOG:TEXT")
{
   field(DESC, "Log messages for DAE")	
   field(NELM, "10024")
   field(FTVL, "CHAR")
   field(DTYP, "asynOctetRead")
   field(INP,  "@asyn(daelog,0,0)TEXT")
   field(SCAN, "I/O Intr")
}

record(waveform, "$(P)LOG:CONSOLES:TEXT")
{
   field(DESC, "Log messages from running IoCs")  
   field(NELM, "10024")
   field(FTVL, "CHAR")
   field(DTYP, "asynOctetRead")
   field(INP,  "@asyn(consoleslog,0,0)TEXT")
   field(SCAN, "I/O Intr")
}

# user@host with control
record (stringin, "$(P)CS:CONTROL")
{
	field(DESC, "Host which has the control batton")
	field(INP, "$(P)CS:CONTROL:REQUEST")
	field(SCAN, "Passive")
	field(DTYP, "Soft Channel")
	
}

# write user@host here to request control
record (stringout, "$(P)CS:CONTROL:REQUEST") 
{
	field(DESC, "Request control")
	field(SCAN, "Passive")
	field(DTYP, "Soft Channel")
	field(SDIS, "$(P)CS:CONTROL:LOCKED")
	field(DISV, "1")
	field(FLNK, "$(P)CS:CONTROL")
}

record (stringin, "$(P)CS:CONTROL:STAT") 
{
	field(DESC, "Request control status")
	field(SCAN, "Passive")
	field(DTYP, "Soft Channel")
}

# set to YES to lock out anybody else requesting access
record (bo, "$(P)CS:CONTROL:LOCKED") 
{
	field(DESC, "Request control lock")
	field(SCAN, "Passive")
	field(DTYP, "Soft Channel")
	field(ZNAM, "NO")
	field(ONAM, "YES")
	field(PINI, "YES")
	field(VAL, "0")
}

record (bo, "$(P)CS:MANAGER") 
{
	field(DESC, "Manager access")
	field(SCAN, "Passive")
	field(DTYP, "Soft Channel")
	field(PINI, "YES")
	field(VAL, "0")
	field(OMSL, "supervisory")
	field(ZNAM, "No")
	field(ONAM, "Yes")
}

# This points to the centrally located shutter status and archives it locally 
record (mbbi, "$(P)CS:SHUTTER")
{
	field(INP, "$(P)SHTR:STAT CP")
	field(PINI, "YES")
	field(ZRVL, 0)
	field(ONVL, 1)
	field(TWVL, 2)
	field(THVL, 3)
	field(FRVL, 4)
	field(ZRST, "DEACT")
	field(ONST, "OPEN")
	field(TWST, "CLOSED")
	field(THST, "MOVING")
	field(FRST, "FAULT")	
	field(SIML, "$(P)SIM")
	field(SIOL, "$(P)SIM:CS:SHUTTER CP")
	info(archive, "VAL")
}

record (mbbo, "$(P)SIM:CS:SHUTTER")
{
	field(SCAN, "Passive")
	field(DTYP, "Soft Channel")	
}