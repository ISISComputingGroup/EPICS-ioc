record(bo, "$(P)SIM")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
    field(ZNAM, "NO")
    field(ONAM, "YES")
    field(VAL, "$(RECSIM=0)")
}

record(bo, "$(P)DISABLE") 
{
    field(DESC, "Disable comms")
    field(PINI, "YES")
    field(VAL, "$(DISABLE=0)")
    field(OMSL, "supervisory")
    field(ZNAM, "COMMS ENABLED")
    field(ONAM, "COMMS DISABLED")
}

record(bo, "$(P)INITIALIZE")
{
	field(DESC, "Initialize")
	field(DTYP, "stream")
	field(PINI, "YES")
	field(VAL, "1")
	field(OUT, "@devcybaman.proto initialize $(PORT)")
}

record(bo, "$(P)RESET")
{
	field(DTYP, "stream")
	field(OUT, "@devcybaman.proto reset $(PORT)")
}

record(bo, "$(P)STOP")
{
	field(DTYP, "stream")
	field(OUT, "@devcybaman.proto stop $(PORT)")
}

record(calcout, "$(P)POS:SP:RAW")
{
	field(INPA, "$(P)A:SP")
	field(INPB, "$(P)B:SP")
	field(INPC, "$(P)C:SP")
	field(INPD, "$(P)_CALC_TM_AND_SET")
	field(CALC, "0")
	field(DTYP, "stream")
	field(OUT, "@devcybaman.proto sendValues $(PORT)")
	field(OOPT, "Every Time")
}

record(calc, "$(P)_CALC_TM_AND_SET")
{
	field(INPA, "$(P)A:SP")
	field(INPB, "$(P)B:SP")
	field(INPC, "$(P)C:SP")
	field(INPD, "$(P)A")
	field(INPE, "$(P)B")
	field(INPF, "$(P)C")
	field(CALC, "MAX(1000*CEIL(MAX(MAX(ABS(A-D),ABS(B-E)),ABS(C-F))),4000)")
	field(FLNK, "$(P)POS:SP:RAW")
}

