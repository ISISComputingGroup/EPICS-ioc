record(bo, "$(P)SIM")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
    field(ZNAM, "NO")
    field(ONAM, "YES")
	field(VAL, "$(RECSIM=0)")
}

record(bo, "$(P)DISABLE") 
{
  field(DESC, "Disable comms")
  field(PINI, "YES")
  field(VAL, "$(DISABLE)")
  field(OMSL, "supervisory")
  field(ZNAM, "COMMS ENABLED")
  field(ONAM, "COMMS DISABLED")
}

record(stringin, "$(P)LOGMESSAGE") 
{
	field(DESC, "Returns most recent log message")
    field(SCAN, "1 second")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:LOGMESSAGE")
    field(SDIS, "$(P)DISABLE")
	info(INTEREST, "HIGH")
	info(archive, "VAL")
}


record(stringin, "$(P)ERRORMESSAGE") 
{
	field(DESC, "Returns most recent log message")
    field(SCAN, "1 second")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:ERRORMESSAGE")
    field(SDIS, "$(P)DISABLE")
	info(INTEREST, "HIGH")
	info(archive, "VAL")
}

record(ai, "$(P)MIDFINALTARGET")
{
	field(DESC, "Returns final value of mid")
    field(SCAN, "1 second")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:MIDFINALTARGET")
    field(SDIS, "$(P)DISABLE")
	info(INTEREST, "HIGH")
	info(archive, "VAL")
}

record(ai, "$(P)ZERO")
{
	field(DESC, "Returns Zero value")
    field(SCAN, "1 second")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:ZERO")
    field(SDIS, "$(P)DISABLE")
	info(INTEREST, "HIGH")
	info(archive, "VAL")
}

record(ai, "$(P)OUTPUT") 
{
	field(DESC, "Displays output string")
    field(SCAN, "1 second")
	field(DTYP, "stream")
	field(INP,  "@devHFMAGPSU.proto getOutput $(PORT)")
	field(PREC, "3")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:OUTPUT")
    field(SDIS, "$(P)DISABLE")
	info(INTEREST, "HIGH")
	info(archive, "VAL")
}

record(bo, "$(P)PAUSE:SP")
{
	field(DESC, "Pauses system on/off")
    field(SCAN, "Passive")
    field(DTYP, "stream")
	field(ZNAM, "OFF")
    field(ONAM, "ON")
    field(OUT,  "@devHFMAGPSU.proto setPause($(P)LOGMESSAGE) $(PORT)")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:PAUSE:SP")
    field(SDIS, "$(P)DISABLE")
	info(INTEREST, "HIGH")
	info(archive, "VAL")
}

record(bi, "$(P)PAUSE") 
{
	field(DESC, "Returns current pause status")
    field(SCAN, "1 second")
    field(DTYP, "stream")
	field(ZNAM, "OFF")
    field(ONAM, "ON")   
	field(INP, "@devHFMAGPSU.proto getPause $(PORT)")	
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:PAUSE:SP")
    field(SDIS, "$(P)DISABLE")
	info(INTEREST, "HIGH")
	info(archive, "VAL")
}

alias("$(P)PAUSE", "$(P)PAUSE:SP:RBV")

record(mbbo, "$(P)DIRECTION:SP")
{
	field(DESC, "Set Direction - 0, +ve, -ve")
	field(DTYP, "stream")
	field(ZRST, "-")
	field(ZRVL, "0")
	field(ONST, "0")
	field(ONVL, "1")
	field(TWST, "+")
	field(TWVL, "2")
	field(SDIS, "$(P)DISABLE")
	field(OUT, "@devHFMAGPSU.proto setDirection($(P)LOGMESSAGE) $(PORT)")
	field(SIML, "$(P)SIM")
	field(SIOL, "$(P)SIM:DIRECTION:SP")
	info(INTEREST, "HIGH")
	info(archive, "VAL")
}
  
record(mbbi, "$(P)DIRECTION")
{
	field(DESC, "Returns current direction")
	field(SCAN, "1 second")
    field(DTYP, "stream")
	field(ZRST, "-")
	field(ZRVL, "0")
	field(ONST, "0")
	field(ONVL, "1")
	field(TWST, "+")
	field(TWVL, "2")
    field(INP, "@devHFMAGPSU.proto getDirection $(PORT)")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:DIRECTION")
    field(SDIS, "$(P)DISABLE")
	info(INTEREST, "HIGH")
	info(archive, "VAL")
}


alias("$(P)DIRECTION", "$(P)DIRECTION:SP:RBV")

record(mbbo, "$(P)RAMPTARGET:SP")
{
	field(DESC, "Set ramp target - 0, mid, max")
	field(DTYP, "stream")
	field(ZRST, "ZERO")
	field(ONST, "MID")
	field(TWST, "MAX")
	field(OUT, "@devHFMAGPSU.proto setRampTarget($(P)LOGMESSAGE) $(PORT)")
	field(SIML, "$(P)SIM")
	field(SIOL, "$(P)SIM:RAMPTARGET:SP")
	field(SDIS, "$(P)DISABLE")
	info(INTEREST, "HIGH")
	info(archive, "VAL")
} 

record(mbbi, "$(P)RAMPTARGET")
{
	field(DESC, "Returns ramp status")
	field(SCAN, "1 second")
    field(DTYP, "stream")
    field(INP,  "@devHFMAGPSU.proto getRampTarget $(PORT)")
	field(ZRST, "ZERO")
	field(ONST, "MID")
	field(TWST, "MAX")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:RAMPTARGET:SP")
    field(SDIS, "$(P)DISABLE")
	info(INTEREST, "HIGH")
	info(archive, "VAL")
}

alias("$(P)RAMPTARGET", "$(P)RAMPTARGET:SP:RBV")

record(bo, "$(P)HEATERSTATUS:SP")
{
	field(DESC, "set Heater status (off or on)")
    field(SCAN, "Passive")
    field(DTYP, "stream")
    field(ZNAM, "OFF")
    field(ONAM, "ON")
    field(OUT,  "@devHFMAGPSU.proto setHeaterStatus($(P)LOGMESSAGE) $(PORT)")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:HEATERSTATUS:SP")
    field(SDIS, "$(P)DISABLE")
	info(INTEREST, "HIGH")
	info(archive, "VAL")
}

record(bi, "$(P)HEATERSTATUS")
{	
	field(DESC, "Returns heater status (off or on)")
	field(SCAN, "1 second")
    field(DTYP, "stream")
    field(ZNAM, "OFF")
    field(ONAM, "ON")
    field(INP,  "@devHFMAGPSU.proto getHeaterStatus $(PORT)")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:HEATERSTATUS:SP")
    field(SDIS, "$(P)DISABLE")
	info(INTEREST, "HIGH")
	info(archive, "VAL")
}

alias("$(P)HEATERSTATUS", "$(P)HEATERSTATUS:SP:RBV")

record(ai, "$(P)HEATERVALUE")
{
	field(DESC, "Returns heater value in volts")
	field(SCAN, "1 second")
    field(DTYP, "stream")
    field(INP, "@devHFMAGPSU.proto getHeaterValue $(PORT)")   
	field(PREC, "3")
    field(EGU,  "V")
	field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:HEATERVALUE:SP")
    field(SDIS, "$(P)DISABLE")
	info(INTEREST, "HIGH")
	info(archive, "VAL")
}
alias("$(P)HEATERVALUE", "$(P)HEATERVALUE:SP:RBV")

record(ai, "$(P)MAX")
{
	field(DESC, "Returns value of MAX")
	field(SCAN, "1 second")
    field(DTYP, "stream")
    field(INP,  "@devHFMAGPSU.proto getMaxTarget $(PORT)")
    field(PREC, "3")	
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:MAX:SP")
    field(SDIS, "$(P)DISABLE")
	info(INTEREST, "HIGH")
    info(archive, "VAL")
}

record(ao, "$(P)MAX:SP")
{
	field(DESC, "MAX value setpoint")
    field(SCAN, "Passive")
    field(DTYP, "stream")
    field(OUT,  "@devHFMAGPSU.proto setMaxTarget($(P)LOGMESSAGE) $(PORT)")    
    field(PREC, "3")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:MAX:SP")
    field(SDIS, "$(P)DISABLE")
    info(INTEREST, "HIGH")
    info(archive, "VAL")
}

record(ai, "$(P)LIMIT")
{
	field(DESC, "Returns value of voltage limit")
	field(SCAN, "1 second")
    field(DTYP, "stream")
    field(INP,  "@devHFMAGPSU.proto getLimit $(PORT)")
	field(EGU, "V")
    field(PREC, "3")	
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:LIMIT:SP")
    field(SDIS, "$(P)DISABLE")
	info(INTEREST, "HIGH")
    info(archive, "VAL")
}

alias("$(P)LIMIT", "$(P)LIMIT:SP:RBV")

record(ao, "$(P)LIMIT:SP")
{
	field(DESC, "voltage limit setpoint")
    field(SCAN, "Passive")
    field(DTYP, "stream")
    field(OUT,  "@devHFMAGPSU.proto setLimit($(P)LOGMESSAGE) $(PORT)")
    field(EGU, "V") 
    field(PREC, "3")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:LIMIT:SP")
    field(SDIS, "$(P)DISABLE")
    info(INTEREST, "HIGH")
    info(archive, "VAL")	
}

record(ai, "$(P)CONSTANT")
{
	field(DESC, "Returns value of field constant")
	field(SCAN, "1 second")
    field(DTYP, "stream")
    field(INP,  "@devHFMAGPSU.proto getConstant $(PORT)")
	field(EGU, "T/A")
    field(PREC, "5")	
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:CONSTANT:SP")
    field(SDIS, "$(P)DISABLE")
	info(INTEREST, "HIGH")
    info(archive, "VAL")
}

alias("$(P)CONSTANT", "$(P)CONSTANT:SP:RBV")

record(ao, "$(P)CONSTANT:SP")
{
	field(DESC, "Set field constant")
    field(SCAN, "Passive")
    field(DTYP, "stream")
    field(OUT,  "@devHFMAGPSU.proto setConstant($(P)LOGMESSAGE) $(PORT)")
    field(EGU, "T/A") 
    field(PREC, "5")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:CONSTANT:SP")
    field(SDIS, "$(P)DISABLE")
    info(INTEREST, "HIGH")
    info(archive, "VAL")	
}

record(ai, "$(P)MID")
{
	field(DESC, "Return MID Value")
	field(SCAN, "1 second")
    field(DTYP, "stream")
    field(INP,  "@devHFMAGPSU.proto getMidTarget $(PORT)")
	# field(EGU, "") # set by units transfer
    field(PREC, "3")	
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:MID:SP")
    field(SDIS, "$(P)DISABLE")
	info(INTEREST, "HIGH")
    info(archive, "VAL")
}
alias("$(P)MID", "$(P)MID:SP:RBV")

record(ao, "$(P)MID:SP")
{
	field(DESC, "MID value setpoint")
    field(SCAN, "Passive")
    field(DTYP, "stream")
    field(OUT,  "@devHFMAGPSU.proto setMidTarget($(P)LOGMESSAGE) $(PORT)")    
    field(PREC, "3")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:MID:SP")
    field(SDIS, "$(P)DISABLE")
    info(INTEREST, "HIGH")
    info(archive, "VAL")
}

record(ai, "$(P)RAMPRATE")
{
	field(DESC, "Return ramp rate Value - amps per second")
	field(SCAN, "1 second")
    field(DTYP, "stream")
    field(INP,  "@devHFMAGPSU.proto getRampRate $(PORT)")
    field(PREC, "3")	
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:RAMPRATE:SP")
    field(SDIS, "$(P)DISABLE")
	info(INTEREST, "HIGH")
    info(archive, "VAL")
}
alias("$(P)RAMPRATE", "$(P)RAMPRATE:SP:RBV")

record(ao, "$(P)RAMPRATE:SP")
{
	field(DESC, "Ramp Rate set in amps per second)")
    field(SCAN, "Passive")
    field(DTYP, "stream")
    field(OUT,  "@devHFMAGPSU.proto setRampRate($(P)LOGMESSAGE) $(PORT)")
	field(PREC, "3")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:RAMPRATE:SP")
    field(SDIS, "$(P)DISABLE")
    info(INTEREST, "HIGH")
    info(archive, "VAL")
}

record(ao, "$(P)HEATERVALUE:SP") 
{
    field(DESC, "Heater value, in volts")
    field(SCAN, "Passive")
    field(DTYP, "stream")
    field(OUT,  "@devHFMAGPSU.proto setHeaterValue($(P)LOGMESSAGE) $(PORT)")
    field(EGU, "V")   
    field(PREC, "3")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:HEATERVALUE:SP")
    field(SDIS, "$(P)DISABLE")
    info(INTEREST, "HIGH")
    info(archive, "VAL")
}

record(bo, "$(P)OUTPUTMODE:SP")
{
	field(DESC, "Set Output Mode - amps or tesla")
    field(SCAN, "Passive")
    field(DTYP, "stream")
    field(OUT,  "@devHFMAGPSU.proto setOutputMode($(P)LOGMESSAGE) $(PORT)")
    field(ZNAM, "AMPS")
    field(ONAM, "TESLA")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:OUTPUTMODE:SP")
    field(SDIS, "$(P)DISABLE")
	info(INTEREST, "HIGH")
	info(archive, "VAL")
}

record(bi, "$(P)OUTPUTMODE")
{
	field(DESC, "Returns output mode - amps or tesla")
	field(SCAN, "1 second")
    field(DTYP, "stream")
    field(INP,  "@devHFMAGPSU.proto getOutputMode $(PORT)")
	field(ZNAM, "AMPS")
    field(ONAM, "TESLA")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:OUTPUTMODE:SP")
    field(SDIS, "$(P)DISABLE")
	info(INTEREST, "HIGH")
	info(archive, "VAL")
}

alias("$(P)OUTPUTMODE", "$(P)OUTPUTMODE:SP:RBV")
 
 
### SIMULATION RECORDS ### 
 
record(bi, "$(P)SIM:PAUSE")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

alias("$(P)SIM:PAUSE","$(P)SIM:PAUSE:SP:RBV")


record(mbbi, "$(P)SIM:DIRECTION")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

alias("$(P)SIM:DIRECTION","$(P)SIM:DIRECTION:SP:RBV")

record(bi, "$(P)SIM:OUTPUTMODE")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

alias("$(P)SIM:OUTPUTMODE","$(P)SIM:OUTPUTMODE:SP:RBV")

record(mbbi, "$(P)SIM:RAMPTARGET")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

alias("$(P)SIM:RAMPTARGET","$(P)SIM:RAMPTARGET:SP:RBV")

record(mbbi, "$(P)SIM:RAMPRATE")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}


alias("$(P)SIM:RAMPRATE","$(P)SIM:RAMPRATE:SP:RBV")

record(bi, "$(P)SIM:HEATERSTATUS")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

alias("$(P)SIM:HEATERSTATUS","$(P)SIM:HEATERSTATUS:SP:RBV")
 
record(ai, "$(P)SIM:HEATERVALUE")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

alias("$(P)SIM:HEATERVALUE","$(P)SIM:HEATERVALUE:SP:RBV")

record(ai, "$(P)SIM:MID")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

alias("$(P)SIM:MID","$(P)SIM:MID:SP:RBV")

record(ai, "$(P)SIM:MAX")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

alias("$(P)SIM:MAX","$(P)SIM:MAX:SP:RBV")

record(ai, "$(P)SIM:LIMIT")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}
alias("$(P)SIM:LIMIT","$(P)SIM:LIMIT:SP:RBV")

record(ai, "$(P)SIM:CONSTANT")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}
alias("$(P)SIM:CONSTANT","$(P)SIM:CONSTANT:SP:RBV")

record(stringin, "$(P)SIM:LOGMESSAGE")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

record(stringin, "$(P)SIM:ERRORMESSAGE")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

record(ai, "$(P)SIM:OUTPUT")
{
	field(SCAN, "Passive")
	field(DTYP, "Soft Channel")
}

record(ai, "$(P)SIM:MIDFINALTARGET")
{
	field(SCAN, "Passive")
	field(DTYP, "Soft Channel")
}

record(ai, "$(P)SIM:ZERO")
{
	field(SCAN, "Passive")
	field(DTYP, "Soft Channel")
}
