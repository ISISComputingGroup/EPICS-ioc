record(bo, "$(P)SIM")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
    field(ZNAM, "NO")
    field(ONAM, "YES")
    field(VAL, "$(RECSIM=0)")
    field(PINI, "YES")
}

record(bo, "$(P)DISABLE")
{
    field(DESC, "Disable comms")
    field(PINI, "YES")
    field(VAL, "$(DISABLE=0)")
    field(OMSL, "supervisory")
    field(ZNAM, "COMMS ENABLED")
    field(ONAM, "COMMS DISABLED")
}

record(ao, "$(P)P:SP") {
  field(DESC, "Set PID P")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@itc503.proto set_p $(PORT)")
  field(OMSL, "supervisory")
  field(PREC, "2")
  field(DRVH, "999.99")
  field(DRVL, "0")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:P:SP")
  field(SDIS, "$(P)DISABLE")
}

record(ao, "$(P)I:SP") {
  field(DESC, "Set PID I")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@itc503.proto set_i $(PORT)")
  field(OMSL, "supervisory")
  field(PREC, "1")
  field(DRVH, "9999.9")
  field(DRVL, "0")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:I:SP")
  field(SDIS, "$(P)DISABLE")
}

record(ao, "$(P)D:SP") {
  field(DESC, "Set PID D")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@itc503.proto set_d $(PORT)")
  field(OMSL, "supervisory")
  field(PREC, "1")
  field(DRVH, "9999.9")
  field(DRVL, "0")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:D:SP")
  field(SDIS, "$(P)DISABLE")
}

record(ao, "$(P)MAXV:SP") {
  field(DESC, "Set max htr v")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@itc503.proto set_maxv $(PORT)")
  field(OMSL, "supervisory")
  field(PREC, "1")
  field(DRVH, "99.9")
  field(DRVL, "0")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:MAXV:SP")
  field(SDIS, "$(P)DISABLE")
}

record(ao, "$(P)SHIELDFLW:SP") {
  field(DESC, "Set shield flow")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@itc503.proto set_sh_flo $(PORT)")
  field(OMSL, "supervisory")
  field(PREC, "1")
  field(DRVH, "99.9")
  field(DRVL, "0")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:SHIELDFLW:SP")
  field(SDIS, "$(P)DISABLE")
}

record(ao, "$(P)SAMPLEFLW:SP") {
  field(DESC, "Set sample flow")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@itc503.proto set_sa_flo $(PORT)")
  field(OMSL, "supervisory")
  field(PREC, "1")
  field(DRVH, "99.9")
  field(DRVL, "0")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:SAMPLEFLW:SP")
  field(SDIS, "$(P)DISABLE")
}

record(ao, "$(P)GASFLOW:SP") {
  field(DESC, "Set gas flow")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@itc503.proto set_gflow $(PORT)")
  field(OMSL, "supervisory")
  field(PREC, "1")
  field(DRVH, "99.9")
  field(DRVL, "0")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:GASFLOW:SP")
  field(SDIS, "$(P)DISABLE")
}

record(ao, "$(P)MANV:SP") {
  field(DESC, "Set man htr v")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@itc503.proto set_manv $(PORT)")
  field(OMSL, "supervisory")
  field(PREC, "1")
  field(DRVH, "99.9")
  field(DRVL, "0")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:MANV:SP")
  field(SDIS, "$(P)DISABLE")
}

record(bo, "$(P)ACTIVITY:SP") {
  field(DESC, "Set auto or man")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@itc503.proto set_act $(PORT)")
  field(ZNAM, "Manual")
  field(ONAM, "Auto")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:ACTIVITY:SP")
  field(SDIS, "$(P)DISABLE")
}

record(ao, "$(P)TEMP:SP") {
  field(DESC, "Set target temp")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@itc503.proto set_ttemp $(PORT)")
  field(OMSL, "supervisory")
  field(PREC, "2")
  field(DRVH, "999.99")
  field(DRVL, "0")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:TEMP:SP")
  field(SDIS, "$(P)DISABLE")
}

record(bi, "$(P)ACTIVITY") {
  field(DESC, "Get status")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(INP, "@itc503.proto get_sta($(P)CTRL) $(PORT)")
  field(ZNAM, "Manual")
  field(ONAM, "Auto")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:ACTIVITY")
  field(SDIS, "$(P)DISABLE")
}

record(mbbi, "$(P)CTRL") {
  field(DESC, "Get control")
  field(DTYP, "Soft Channel")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(ZRST, "FPLock")
  field(ONST, "EPICS+FPLock")
  field(TWST, "FPUnlock")
  field(THST, "EPICS+FPUnlock")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:CTRL")
  field(SDIS, "$(P)DISABLE")
}

record(mbbo, "$(P)CTRL:SP") {
  field(DESC, "Set control")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(DTYP, "stream")
  field(VAL, "1")
  field(OUT, "@itc503.proto set_ctrl $(PORT)")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(ZRST, "FPLock")
  field(ONST, "EPICS+FPLock")
  field(TWST, "FPUnlock")
  field(THST, "EPICS+FPUnlock")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:CTRL:SP")
  field(SDIS, "$(P)DISABLE")
}

record(ai, "$(P)TEMP:SP:RBV") {
  field(DESC, "Get target temp")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(INP, "@itc503.proto get_ttemp $(PORT)")
  field(PREC, "2")
  field(HOPR, "999.99")
  field(LOPR, "0")
  field(EGU, "K")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:TEMP:SP:RBV")
  field(SDIS, "$(P)DISABLE")
}

record(ai, "$(P)TEMP") {
  field(DESC, "Get sensor temp")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(INP, "@itc503.proto get_stemp $(PORT)")
  field(PREC, "2")
  field(HOPR, "999.99")
  field(LOPR, "0")
  field(EGU, "K")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:TEMP")
  field(SDIS, "$(P)DISABLE")
}

record(ai, "$(P)TEMP:ERR") {
  field(DESC, "Get temp error")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(INP, "@itc503.proto get_etemp $(PORT)")
  field(PREC, "2")
  field(HOPR, "999.99")
  field(LOPR, "-999.99")
  field(EGU, "K")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:TEMP:ERR")
  field(SDIS, "$(P)DISABLE")
}

record(ai, "$(P)HEATERP") {
  field(DESC, "Get heater %")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(INP, "@itc503.proto get_htrp $(PORT)")
  field(PREC, "0")
  field(EGU, "%")
  field(HOPR, "100")
  field(LOPR, "0")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:HEATERP")
  field(SDIS, "$(P)DISABLE")
}

record(ai, "$(P)HEATERV") {
  field(DESC, "Get heater volts")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(INP, "@itc503.proto get_htrv $(PORT)")
  field(PREC, "1")
  field(EGU, "V")
  field(HOPR, "99.9")
  field(LOPR, "0")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:HEATERV")
  field(SDIS, "$(P)DISABLE")
}

record(ai, "$(P)P") {
  field(DESC, "Get PID P")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(INP, "@itc503.proto get_p $(PORT)")
  field(PREC, "2")
  field(HOPR, "999.99")
  field(LOPR, "0")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:P")
  field(SDIS, "$(P)DISABLE")
}

record(ai, "$(P)I") {
  field(DESC, "Get PID I")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(INP, "@itc503.proto get_i $(PORT)")
  field(PREC, "1")
  field(HOPR, "999.9")
  field(LOPR, "0")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:I")
  field(SDIS, "$(P)DISABLE")
}

record(ai, "$(P)D") {
  field(DESC, "Get PID D")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(INP, "@itc503.proto get_d $(PORT)")
  field(PREC, "1")
  field(HOPR, "999.9")
  field(LOPR, "0")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:D")
  field(SDIS, "$(P)DISABLE")
}

record(ai, "$(P)SHIELDFLW") {
  field(DESC, "Get shield flow")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(INP, "@itc503.proto get_sh_flo $(PORT)")
  field(PREC, "1")
  field(HOPR, "99.9")
  field(LOPR, "0")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:SHIELDFLW")
  field(SDIS, "$(P)DISABLE")
}

record(ai, "$(P)SAMPLEFLW") {
  field(DESC, "Get sample flow")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(INP, "@itc503.proto get_sa_flo $(PORT)")
  field(PREC, "1")
  field(HOPR, "99.9")
  field(LOPR, "0")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:SAMPLEFLW")
  field(SDIS, "$(P)DISABLE")
}

record(ai, "$(P)GASFLOW") {
  field(DESC, "Get gas flow")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(INP, "@itc503.proto get_gflow $(PORT)")
  field(PREC, "1")
  field(HOPR, "99.9")
  field(LOPR, "0")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:GASFLOW")
  field(SDIS, "$(P)DISABLE")
}

record(ai, "$(P)CHANFREQ") {
  field(DESC, "Get channel freq")
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(INP, "@itc503.proto get_chnf $(PORT)")
  field(PREC, "1")
  field(HOPR, "100000")
  field(LOPR, "0")
  field(ASLO, "4")
  field(EGU, "Hz")
  field(SIML, "$(P)SIM")
  field(SIOL, "$(P)SIM:CHANFREQ")
  field(SDIS, "$(P)DISABLE")
}

record(seq, "$(P)FAN1") {
  field(SCAN, "10 second")
  field(SDIS, "$(P)DISABLE")
  field(SELM, "All")
  field(LNK1, "$(P)P.PROC PP")
  field(LNK2, "$(P)I.PROC PP")
  field(LNK3, "$(P)D.PROC PP")
  field(LNK4, "$(P)TEMP.PROC PP")
  field(LNK5, "$(P)TEMP:SP:RBV.PROC PP")
  field(LNK6, "$(P)TEMP:ERR.PROC PP")
  field(LNK7, "$(P)FAN2.PROC PP")
  field(LNK8, "$(P)FAN1.DESC")      
  field(DLY2, "1.0")
  field(DLY3, "1.0")
  field(DLY4, "1.0")
  field(DLY5, "1.0")
  field(DLY6, "1.0")   
  field(DLY7, "1.0")   
  field(DLY8, "7.0")     
}

record(seq, "$(P)FAN2") {
  field(SELM, "All")
  field(LNK1, "$(P)HEATERP.PROC PP")
  field(LNK2, "$(P)SHIELDFLW.PROC PP")
  field(LNK3, "$(P)SAMPLEFLW.PROC PP")
  field(LNK4, "$(P)HEATERV.PROC PP")
  field(LNK5, "$(P)ACTIVITY.PROC PP")
  field(LNK6, "$(P)CHANFREQ.PROC PP")  
  field(LNK7, "$(P)GASFLOW.PROC PP")  
  field(DLY2, "1.0")
  field(DLY3, "1.0")
  field(DLY4, "1.0")
  field(DLY5, "1.0")
  field(DLY6, "1.0")
}


# Simulation records

record(ao, "$(P)SIM:P"){}
alias("$(P)SIM:P", "$(P)SIM:P:SP")

record(ao, "$(P)SIM:I"){}
alias("$(P)SIM:I", "$(P)SIM:I:SP")

record(ao, "$(P)SIM:D"){}
alias("$(P)SIM:D", "$(P)SIM:D:SP")

record(ao, "$(P)SIM:SHIELDFLW"){}
alias("$(P)SIM:SHIELDFLW", "$(P)SIM:SHIELDFLW:SP")

record(ao, "$(P)SIM:SAMPLEFLW"){}
alias("$(P)SIM:SAMPLEFLW", "$(P)SIM:SAMPLEFLW:SP")

record(ao, "$(P)SIM:GASFLOW"){}
alias("$(P)SIM:GASFLOW", "$(P)SIM:GASFLOW:SP")

record(bo, "$(P)SIM:ACTIVITY") {
  field(ZNAM, "Manual")
  field(ONAM, "Auto")
}
alias("$(P)SIM:ACTIVITY", "$(P)SIM:ACTIVITY:SP")

record(ao, "$(P)SIM:CHANFREQ"){}
record(ao, "$(P)SIM:HEATERP"){}
record(ao, "$(P)SIM:HEATERV"){}

record(ao, "$(P)SIM:TEMP"){}
alias("$(P)SIM:TEMP", "$(P)SIM:TEMP:SP")
alias("$(P)SIM:TEMP", "$(P)SIM:TEMP:SP:RBV")

